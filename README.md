# midi2shadertoy

This repository contains a very basic tool to convert midi files (generated by
<https://ai-midi.com/>) into shadertoy-compatible GLSL code.

Online example: <https://www.shadertoy.com/view/t3KGzd>

## Parsing Assumptions & Limitations

1. Instrument: only piano is supported.
2. Header Chunk:
    - The `format` field is ignored.
    - Only `Metrical` timing is supported.
3. Events:
    - Midi Event:
        - Only `Tempo`, `TimeSignature`, and `EndOfTrack` events are supported.
        - `TimeSignature` events are actually ignored.
    - Meta Event:
        - Only `NoteOn`, `NoteOff`, and `Controller` messages are supported.
        - The `vel` (velocity) field of `NoteOn`/`NoteOff` messages is ignored.
        - `Controller` events are actually ignored.
        - Assumes all MIDI messages occur on a single channel.
    - System Exclusive Event: those are
4. Event Order:
    - All `Tempo` and `TimeSignature` events must appear before any note events.

## Usage

The path to the MIDI file is currently hardcoded in the source code. To use a different file,
update the `MIDI_FILE` constant in `src/main.rs` Then run

```bash
git clone git@github.com:o06660o/midi2shadertoy.git
cd midi2shadertoy
cargo run --bin parser
```
